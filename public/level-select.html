<!DOCTYPE html>
<html class="light" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>HSK Level Selection - Chinese Learning App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#448fe4",
            "background-light": "#f6f7f8",
            "background-dark": "#111921",
            "surface-light": "#ffffff",
            "surface-dark": "#18222c",
            "text-primary-light": "#111417",
            "text-primary-dark": "#f0f4f8",
            "text-secondary-light": "#647487",
            "text-secondary-dark": "#a0aec0",
            "border-light": "#dce0e5",
            "border-dark": "#2d3748",
          },
          fontFamily: {
            "display": ["Work Sans", "sans-serif"]
          },
        },
      },
    }
  </script>
  <style>
    body {
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .level-option {
      transition: all 0.2s ease;
    }

    .level-option:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(68, 143, 228, 0.15);
    }

    .level-option input:checked ~ .option-content {
      background: rgba(68, 143, 228, 0.1);
      border-color: #448fe4;
    }

    .level-option input:checked ~ .option-content .check-icon {
      opacity: 1;
    }

    .difficulty-badge {
      font-size: 0.625rem;
      padding: 0.25rem 0.5rem;
      border-radius: 9999px;
      font-weight: 600;
    }
  </style>
</head>
<body class="font-display bg-background-light dark:bg-background-dark text-text-primary-light dark:text-text-primary-dark">

  <div class="flex min-h-screen flex-col p-4">

    <!-- Header with back button -->
    <div class="mb-6 flex items-center">
      <button onclick="window.history.back()" class="flex h-10 w-10 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors">
        <span class="material-symbols-outlined">arrow_back</span>
      </button>
    </div>

    <!-- Title Area -->
    <div class="mb-8 text-center">
      <h1 class="text-3xl font-bold mb-2" data-i18n="selectLevel">Choose Your Level</h1>
      <p class="text-text-secondary-light dark:text-text-secondary-dark" data-i18n="selectLevelDesc">Select your HSK proficiency level</p>
      <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark mt-1">You can change this later in settings</p>
    </div>

    <!-- Level Options -->
    <div class="mx-auto w-full max-w-2xl space-y-3 pb-32">

      <!-- HSK 1 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="1" class="peer hidden" checked />
        <div class="option-content relative flex items-start gap-4 rounded-xl border-2 border-border-light dark:border-border-dark bg-surface-light dark:bg-surface-dark p-5 shadow-sm transition-all peer-checked:border-primary peer-checked:bg-primary/5">

          <div class="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white">
            <span class="text-2xl font-bold">1</span>
          </div>

          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <p class="text-xl font-bold">HSK 1</p>
              <span class="difficulty-badge bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400" data-i18n="beginner">Beginner</span>
            </div>
            <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark mb-2" data-i18n="hsk1Desc">
              150 words Â· Basic phrases Â· Greetings & introductions
            </p>
            <div class="flex flex-wrap gap-1.5">
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ‘‹ Greetings
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ‘¤ Self-intro
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ”¢ Numbers
              </span>
            </div>
          </div>

          <div class="check-icon flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary text-white opacity-0 transition-opacity">
            <span class="material-symbols-outlined text-sm">check</span>
          </div>
        </div>
      </label>

      <!-- HSK 2 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="2" class="peer hidden" />
        <div class="option-content relative flex items-start gap-4 rounded-xl border-2 border-border-light dark:border-border-dark bg-surface-light dark:bg-surface-dark p-5 shadow-sm transition-all peer-checked:border-primary peer-checked:bg-primary/5">

          <div class="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 text-white">
            <span class="text-2xl font-bold">2</span>
          </div>

          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <p class="text-xl font-bold">HSK 2</p>
              <span class="difficulty-badge bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400" data-i18n="elementary">Elementary</span>
            </div>
            <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark mb-2" data-i18n="hsk2Desc">
              300 words Â· Daily conversations Â· Basic exchanges
            </p>
            <div class="flex flex-wrap gap-1.5">
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ  Daily life
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ›’ Shopping
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                â° Time
              </span>
            </div>
          </div>

          <div class="check-icon flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary text-white opacity-0 transition-opacity">
            <span class="material-symbols-outlined text-sm">check</span>
          </div>
        </div>
      </label>

      <!-- HSK 3 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="3" class="peer hidden" />
        <div class="option-content relative flex items-start gap-4 rounded-xl border-2 border-border-light dark:border-border-dark bg-surface-light dark:bg-surface-dark p-5 shadow-sm transition-all peer-checked:border-primary peer-checked:bg-primary/5">

          <div class="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-yellow-500 to-orange-500 text-white">
            <span class="text-2xl font-bold">3</span>
          </div>

          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <p class="text-xl font-bold">HSK 3</p>
              <span class="difficulty-badge bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400" data-i18n="intermediate">Intermediate</span>
            </div>
            <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark mb-2" data-i18n="hsk3Desc">
              600 words Â· Work & study topics Â· Complex sentences
            </p>
            <div class="flex flex-wrap gap-1.5">
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ’¼ Work
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ“š Study
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ¯ Hobbies
              </span>
            </div>
          </div>

          <div class="check-icon flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary text-white opacity-0 transition-opacity">
            <span class="material-symbols-outlined text-sm">check</span>
          </div>
        </div>
      </label>

      <!-- HSK 4 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="4" class="peer hidden" />
        <div class="option-content relative flex items-start gap-4 rounded-xl border-2 border-border-light dark:border-border-dark bg-surface-light dark:bg-surface-dark p-5 shadow-sm transition-all peer-checked:border-primary peer-checked:bg-primary/5">

          <div class="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-orange-500 to-red-500 text-white">
            <span class="text-2xl font-bold">4</span>
          </div>

          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <p class="text-xl font-bold">HSK 4</p>
              <span class="difficulty-badge bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400" data-i18n="upperIntermediate">Upper-Int.</span>
            </div>
            <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark mb-2" data-i18n="hsk4Desc">
              1200 words Â· Wide range of topics Â· Fluent communication
            </p>
            <div class="flex flex-wrap gap-1.5">
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ’¬ Discussions
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ“° News
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ­ Culture
              </span>
            </div>
          </div>

          <div class="check-icon flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary text-white opacity-0 transition-opacity">
            <span class="material-symbols-outlined text-sm">check</span>
          </div>
        </div>
      </label>

      <!-- HSK 5 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="5" class="peer hidden" />
        <div class="option-content relative flex items-start gap-4 rounded-xl border-2 border-border-light dark:border-border-dark bg-surface-light dark:bg-surface-dark p-5 shadow-sm transition-all peer-checked:border-primary peer-checked:bg-primary/5">

          <div class="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 text-white">
            <span class="text-2xl font-bold">5</span>
          </div>

          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <p class="text-xl font-bold">HSK 5</p>
              <span class="difficulty-badge bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400" data-i18n="advanced">Advanced</span>
            </div>
            <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark mb-2" data-i18n="hsk5Desc">
              2500 words Â· Academic & professional Â· Chinese media
            </p>
            <div class="flex flex-wrap gap-1.5">
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ“ Academic
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ“º Media
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ“– Articles
              </span>
            </div>
          </div>

          <div class="check-icon flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary text-white opacity-0 transition-opacity">
            <span class="material-symbols-outlined text-sm">check</span>
          </div>
        </div>
      </label>

      <!-- HSK 6 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="6" class="peer hidden" />
        <div class="option-content relative flex items-start gap-4 rounded-xl border-2 border-border-light dark:border-border-dark bg-surface-light dark:bg-surface-dark p-5 shadow-sm transition-all peer-checked:border-primary peer-checked:bg-primary/5">

          <div class="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-red-600 to-pink-600 text-white">
            <span class="text-2xl font-bold">6</span>
          </div>

          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <p class="text-xl font-bold">HSK 6</p>
              <span class="difficulty-badge bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400" data-i18n="mastery">Master</span>
            </div>
            <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark mb-2" data-i18n="hsk6Desc">
              5000+ words Â· Native-like fluency Â· Complex literature
            </p>
            <div class="flex flex-wrap gap-1.5">
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ“œ Literature
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ¬ Movies
              </span>
              <span class="inline-flex items-center rounded-full bg-background-light dark:bg-background-dark px-2.5 py-1 text-xs font-medium">
                ğŸ—£ï¸ Native
              </span>
            </div>
          </div>

          <div class="check-icon flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary text-white opacity-0 transition-opacity">
            <span class="material-symbols-outlined text-sm">check</span>
          </div>
        </div>
      </label>

    </div>

    <!-- Fixed Bottom Section -->
    <div class="fixed bottom-0 left-0 right-0 bg-gradient-to-t from-background-light via-background-light to-transparent dark:from-background-dark dark:via-background-dark p-4 pt-8">
      <div class="mx-auto w-full max-w-2xl">
        <!-- Info Box -->
        <div class="mb-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 p-3 text-sm">
          <div class="flex items-start gap-2">
            <span class="material-symbols-outlined text-blue-600 dark:text-blue-400 text-lg">info</span>
            <p class="text-blue-900 dark:text-blue-200">
              <strong>Not sure?</strong> Start with HSK 1. You can change your level anytime in Profile settings.
            </p>
          </div>
        </div>

        <!-- Continue Button -->
        <button id="continueBtn" class="flex w-full items-center justify-center gap-2 rounded-xl bg-primary px-6 py-4 font-bold text-white shadow-lg transition-all hover:bg-primary/90 active:scale-98">
          <span>Start Learning</span>
          <span class="material-symbols-outlined">arrow_forward</span>
        </button>

        <!-- Progress Indicator -->
        <div class="mt-4 flex items-center justify-center gap-2">
          <div class="h-2 w-8 rounded-full bg-primary"></div>
          <div class="h-2 w-8 rounded-full bg-primary"></div>
        </div>
      </div>
    </div>

  </div>

  <script src="/i18n.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    tg.ready();

    let selectedLevel = null;
    const continueBtn = document.getElementById('continueBtn');
    const levelInputs = document.querySelectorAll('input[name="hsk-level"]');

    // Handle level selection
    levelInputs.forEach(input => {
      input.addEventListener('change', (e) => {
        selectedLevel = e.target.value;

        // Haptic feedback
        if (tg.HapticFeedback) {
          tg.HapticFeedback.impactOccurred('light');
        }

        console.log('Level selected:', selectedLevel);
      });
    });

    // Handle continue button
    continueBtn.addEventListener('click', () => {
      if (!selectedLevel) {
        alert('Please select an HSK level');
        return;
      }

      // Haptic feedback
      if (tg.HapticFeedback) {
        tg.HapticFeedback.notificationOccurred('success');
      }

      // Save selected level
      localStorage.setItem('hskLevel', selectedLevel);
      localStorage.setItem('setupCompleted', 'true');

      // Navigate to main app
      window.location.href = '/main-app.html';
    });

    // Load previously selected level if exists
    const savedLevel = localStorage.getItem('hskLevel');
    if (savedLevel) {
      const input = document.querySelector(`input[value="${savedLevel}"]`);
      if (input) {
        input.checked = true;
        selectedLevel = savedLevel;
      }
    }

    // Initialize i18n
    if (window.i18n) {
      window.i18n.init();
    }
  </script>

</body>
</html>

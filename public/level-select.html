<!DOCTYPE html>
<html class="light" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>HSK Level Selection - Chinese Learning App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#448fe4",
            "background-light": "#f6f7f8",
            "background-dark": "#111921",
            "surface-light": "#ffffff",
            "surface-dark": "#18222c",
            "text-primary-light": "#111417",
            "text-primary-dark": "#f0f4f8",
            "text-secondary-light": "#647487",
            "text-secondary-dark": "#a0aec0",
            "border-light": "#dce0e5",
            "border-dark": "#2d3748",
          },
          fontFamily: {
            "display": ["Work Sans", "sans-serif"]
          },
        },
      },
    }
  </script>
  <style>
    body {
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .level-option {
      transition: all 0.2s ease;
    }

    .level-option:active {
      transform: scale(0.98);
    }

    .level-option input:checked ~ .option-content {
      background: #448fe4;
      color: white;
    }

    .level-option input:checked ~ .option-content .level-badge {
      background: rgba(255, 255, 255, 0.2);
    }

    .level-option input:checked ~ .option-content .level-subtitle {
      color: rgba(255, 255, 255, 0.8);
    }

    .level-option input:checked ~ .option-content .check-icon {
      display: flex;
    }
  </style>
</head>
<body class="font-display bg-background-light dark:bg-background-dark text-text-primary-light dark:text-text-primary-dark">

  <div class="flex min-h-screen flex-col p-6">

    <!-- Header -->
    <div class="mb-12 text-center">
      <div class="mx-auto mb-6 text-6xl">
        ðŸ“š
      </div>
      <h1 class="text-2xl font-bold mb-2" data-i18n="selectLevel">Select Your HSK Level</h1>
      <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark" data-i18n="selectLevelDesc">Choose the level that matches your current ability</p>
    </div>

    <!-- Level Options -->
    <div class="mx-auto w-full max-w-md space-y-3 flex-1">

      <!-- HSK 1 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="1" class="peer hidden" />
        <div class="option-content relative flex items-center gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-6 shadow-sm transition-all">

          <div class="level-badge flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-green-100 dark:bg-green-900/30 text-xl font-bold transition-all">
            1
          </div>

          <div class="flex-1">
            <p class="text-lg font-bold" data-i18n="beginner">Beginner</p>
            <p class="level-subtitle text-sm text-text-secondary-light dark:text-text-secondary-dark transition-colors" data-i18n="hsk1Desc">Know around 150 common words and basic phrases</p>
          </div>

          <div class="check-icon hidden items-center justify-center">
            <span class="material-symbols-outlined text-2xl">check_circle</span>
          </div>
        </div>
      </label>

      <!-- HSK 2 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="2" class="peer hidden" />
        <div class="option-content relative flex items-center gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-6 shadow-sm transition-all">

          <div class="level-badge flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-blue-100 dark:bg-blue-900/30 text-xl font-bold transition-all">
            2
          </div>

          <div class="flex-1">
            <p class="text-lg font-bold" data-i18n="elementary">Elementary</p>
            <p class="level-subtitle text-sm text-text-secondary-light dark:text-text-secondary-dark transition-colors" data-i18n="hsk2Desc">Handle simple communication on familiar topics</p>
          </div>

          <div class="check-icon hidden items-center justify-center">
            <span class="material-symbols-outlined text-2xl">check_circle</span>
          </div>
        </div>
      </label>

      <!-- HSK 3 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="3" class="peer hidden" />
        <div class="option-content relative flex items-center gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-6 shadow-sm transition-all">

          <div class="level-badge flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-yellow-100 dark:bg-yellow-900/30 text-xl font-bold transition-all">
            3
          </div>

          <div class="flex-1">
            <p class="text-lg font-bold" data-i18n="intermediate">Intermediate</p>
            <p class="level-subtitle text-sm text-text-secondary-light dark:text-text-secondary-dark transition-colors" data-i18n="hsk3Desc">Communicate in everyday situations</p>
          </div>

          <div class="check-icon hidden items-center justify-center">
            <span class="material-symbols-outlined text-2xl">check_circle</span>
          </div>
        </div>
      </label>

      <!-- HSK 4 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="4" class="peer hidden" />
        <div class="option-content relative flex items-center gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-6 shadow-sm transition-all">

          <div class="level-badge flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-orange-100 dark:bg-orange-900/30 text-xl font-bold transition-all">
            4
          </div>

          <div class="flex-1">
            <p class="text-lg font-bold" data-i18n="upperIntermediate">Upper Intermediate</p>
            <p class="level-subtitle text-sm text-text-secondary-light dark:text-text-secondary-dark transition-colors" data-i18n="hsk4Desc">Discuss a variety of topics fluently</p>
          </div>

          <div class="check-icon hidden items-center justify-center">
            <span class="material-symbols-outlined text-2xl">check_circle</span>
          </div>
        </div>
      </label>

      <!-- HSK 5 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="5" class="peer hidden" />
        <div class="option-content relative flex items-center gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-6 shadow-sm transition-all">

          <div class="level-badge flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-red-100 dark:bg-red-900/30 text-xl font-bold transition-all">
            5
          </div>

          <div class="flex-1">
            <p class="text-lg font-bold" data-i18n="advanced">Advanced</p>
            <p class="level-subtitle text-sm text-text-secondary-light dark:text-text-secondary-dark transition-colors" data-i18n="hsk5Desc">Understand complex texts</p>
          </div>

          <div class="check-icon hidden items-center justify-center">
            <span class="material-symbols-outlined text-2xl">check_circle</span>
          </div>
        </div>
      </label>

      <!-- HSK 6 -->
      <label class="level-option block cursor-pointer">
        <input type="radio" name="hsk-level" value="6" class="peer hidden" />
        <div class="option-content relative flex items-center gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-6 shadow-sm transition-all">

          <div class="level-badge flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-purple-100 dark:bg-purple-900/30 text-xl font-bold transition-all">
            6
          </div>

          <div class="flex-1">
            <p class="text-lg font-bold" data-i18n="mastery">Mastery</p>
            <p class="level-subtitle text-sm text-text-secondary-light dark:text-text-secondary-dark transition-colors" data-i18n="hsk6Desc">Full mastery and comprehension</p>
          </div>

          <div class="check-icon hidden items-center justify-center">
            <span class="material-symbols-outlined text-2xl">check_circle</span>
          </div>
        </div>
      </label>

    </div>

    <!-- Continue Button (Fixed at bottom) -->
    <div class="sticky bottom-0 mt-8 pb-6">
      <button id="continueBtn" class="flex w-full max-w-md mx-auto items-center justify-center gap-2 rounded-2xl bg-primary px-6 py-4 font-bold text-white shadow-lg transition-all active:scale-98">
        <span data-i18n="startLearning">Start Learning</span>
        <span class="material-symbols-outlined">arrow_forward</span>
      </button>

      <!-- Progress Indicator -->
      <div class="mt-6 flex items-center justify-center gap-2">
        <div class="h-2 w-8 rounded-full bg-border-light dark:bg-border-dark"></div>
        <div class="h-2 w-8 rounded-full bg-primary"></div>
      </div>
    </div>

  </div>

  <script src="/i18n.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    tg.ready();

    let selectedLevel = null;
    const continueBtn = document.getElementById('continueBtn');
    const levelInputs = document.querySelectorAll('input[name="hsk-level"]');

    // Handle level selection
    levelInputs.forEach(input => {
      input.addEventListener('change', (e) => {
        selectedLevel = e.target.value;

        // Haptic feedback
        if (tg.HapticFeedback) {
          tg.HapticFeedback.impactOccurred('light');
        }

        console.log('Level selected:', selectedLevel);
      });
    });

    // Handle continue button
    continueBtn.addEventListener('click', () => {
      if (!selectedLevel) {
        alert('Please select an HSK level');
        return;
      }

      // Haptic feedback
      if (tg.HapticFeedback) {
        tg.HapticFeedback.notificationOccurred('success');
      }

      // Save selected level
      localStorage.setItem('hskLevel', selectedLevel);
      localStorage.setItem('setupCompleted', 'true');

      // Navigate to main app
      window.location.href = '/main-app.html';
    });

    // Load previously selected level if exists
    const savedLevel = localStorage.getItem('hskLevel');
    if (savedLevel) {
      const input = document.querySelector(`input[value="${savedLevel}"]`);
      if (input) {
        input.checked = true;
        selectedLevel = savedLevel;
      }
    }

    // Initialize i18n
    if (window.i18n) {
      window.i18n.init();
    }
  </script>

</body>
</html>
